# ML System Design Doc - [RU]
## Дизайн ML системы - Apartment Layout Control

### 1. Цели и предпосылки 
#### 1.1. Зачем идем в разработку продукта?  

#### Бизнес-цель:
Данный продукт должен повысить эффективность мониторинга качества выполняемых работ. В данный момент на одного бригадира приходится около 100 бригад, что требует от него большого кол-ва времени на оценку каждого этапа выполнения ремонтных работ.

#### Почему станет лучше, чем сейчас, от использования ML:
В данный момент процесс оценки качества выполняемых работ происходит вручную, а с разработкой данного продукта процесс можно автоматизировать. Использование ИИ в данном случае сильно упрощает построение алгоритмов для оценки качества, а также делает данный подход расширяемым и гибким. В данном случае используется VLLM, тк в отличии от других CV подходов, она может распознавать новые классы в формате Zero-Shot, а также может создавать рекомендации по изображению.

#### Что будем считать успехом итерации с точки зрения бизнеса:
В данной итерации планируется построить алгоритм, который умеет находить дефект и выдавать рекомендации по его устранению. Проект будет успешным, если точность классификации изображений с дефектами и без будет выше 90%, а также рекомендации будут релевантными в 85% случаев.

#### 1.2. Бизнес-требования и ограничения  

#### Краткое описание БТ и ссылки на детальные документы с бизнес-требованиями:
- Загрузка изображения в телеграмм бот
- Формат обрабатываемых картинок (PNG, JPEG)
- Дефект должен быть классифицирован (трещина, плесень и тд)
- Должны быть даны рекомендации по устранению дефекта

#### Бизнес-ограничения:
- Работа с моделями организуется только через API
- Стоимость одного запроса не должна превышать 0.1$
- Время на обработку одного изображения должно быть меньше 7 секунд


#### 1.3. Что входит в скоуп проекта/итерации, что не входит   

#### На закрытие каких БТ подписываемся в данной итерации:
- Создание телеграмм бота для обработки входящих изображений
- Проведение классификации изображений
- Создание релевантных рекомендаций для пользователя
  
#### Описание результата с точки зрения качества кода и воспроизводимости решения:
- Создание GitHub репозитория с телеграмм ботом и линтером
- Создание MVP алгоритма обработки изображений и генерации рекомендаций по устранению дефектов   

#### Описание планируемого технического долга (что оставляем для дальнейшей продуктивизации):
- Обработка видео
- Внедрение алгоритма в мобильное приложение

#### 1.4. Предпосылки решения  

#### Запросы бизнеса:
- Необходимость повышения эффективности процесса мониторинга
- Наличие потенциального большого рынка сбыта продукта

#### Блоки данных:
- Для проверки качества работы системы будут использоваться изображения собранные из обзоров ремонта

### 2. Методология  

#### 2.1. Постановка задачи  

- С точки зрения ML решается задача классификации изображений
- Также вторичной задачей ML является генерация текста на основе изображения
- Разрабатывается пользовательский интерфейс в виде телеграмм бота

#### 2.2. Блок-схема решения  

В процессе разработки должна быть собранна тестовая выборка, на которой будут оцениваться модели. В данном проекте обучение не предусмотрено. В качестве бейзлайн модели используется детектор дефектов на стенах из [Roboflow](https://universe.roboflow.com/project-ecp30/wall-defect-ogum1/model/1). Процесс обучения здесь заменён на блок экспериментов с промптами и различные модификации LLM системы.

![alt text](../examples/block_scheme_ml_sys.png)  
